################################################################################
# LAB MASTER INVENTORY
# Generated By: pve-mini
################################################################################


================================================================================
 NODE: PVE-MINI (Control Plane) (127.0.0.1)
================================================================================

   >>> [ LXC CONTAINER: 105 ] <<<
   ----------------------------------------
```
NAMES                    IMAGE                                  STATUS                  PORTS
authentik-worker-1       ghcr.io/goauthentik/server:2024.12.0   Up 31 hours (healthy)   
authentik-server         ghcr.io/goauthentik/server:2024.12.0   Up 31 hours (healthy)   0.0.0.0:9000->9000/tcp, [::]:9000->9000/tcp, 0.0.0.0:9443->9443/tcp, [::]:9443->9443/tcp
authentik-postgresql-1   postgres:16-alpine                     Up 31 hours (healthy)   5432/tcp
authentik-redis-1        redis:alpine                           Up 31 hours (healthy)   6379/tcp
dockpeek                 dockpeek/dockpeek:latest               Up 31 hours (healthy)   8000/tcp
dozzle                   amir20/dozzle:latest                   Up 2 days               8080/tcp
homepage                 ghcr.io/gethomepage/homepage:latest    Up 31 hours (healthy)   0.0.0.0:3000->3000/tcp, [::]:3000->3000/tcp
dockge-dockge-1          louislam/dockge:1                      Up 9 days (healthy)     0.0.0.0:5001->5001/tcp, [::]:5001->5001/tcp
uptime-kuma              louislam/uptime-kuma:latest            Up 10 days (healthy)    3001/tcp
gotify                   gotify/server:latest                   Up 10 days (healthy)    80/tcp
traefik                  traefik:v3                             Up 29 hours             0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp, 0.0.0.0:8080->8080/tcp, [::]:8080->8080/tcp
whoami                   traefik/whoami                         Up 32 hours             80/tcp
traefik-kop-redis        redis:7-alpine                         Up 32 hours             0.0.0.0:6379->6379/tcp, [::]:6379->6379/tcp
```
   FILE: /opt/stacks/traefik-kop-redis/compose.yml
```yaml
services:
  redis:
    image: redis:7-alpine
    container_name: traefik-kop-redis
    restart: unless-stopped
    networks:
      - proxy
    ports:
      - "6379:6379"
    volumes:
      - ./data:/data

networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/traefik/compose.yml
```yaml
services:
  traefik:
    image: traefik:v3
    container_name: traefik
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    networks:
      - proxy
    ports:
      - "80:80"
      - "443:443"
      - "8080:8080"
    env_file:
      - /opt/stacks/traefik/.env
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /opt/stacks/traefik/traefik.yml:/etc/traefik/traefik.yml:ro
      - /opt/stacks/traefik/dynamic:/etc/traefik/dynamic:ro
      - /opt/stacks/traefik/acme.json:/acme.json # If you use SSL
  whoami:
    image: traefik/whoami
    container_name: whoami
    restart: unless-stopped
    networks:
      - proxy
    labels:
      - "traefik.enable=true"
      # The Router (Listen for this domain)
      - "traefik.http.routers.whoami.rule=Host(`whoami.tgmcpa.net`)"
      - "traefik.http.routers.whoami.entrypoints=websecure"
      - "traefik.http.routers.whoami.tls.certresolver=cloudflare"

networks:
  proxy:
    external: true

```
   FILE: /opt/stacks/authentik/compose.yaml
```yaml
services:
  postgresql:
    image: docker.io/library/postgres:16-alpine
    restart: always
    healthcheck:
      test:
        - CMD-SHELL
        - pg_isready -d authentik -U authentik
      start_period: 20s
      interval: 30s
      retries: 5
      timeout: 5s
    volumes:
      - database:/var/lib/postgresql/data
    environment:
      POSTGRES_PASSWORD: ${PG_PASS}
      POSTGRES_USER: authentik
      POSTGRES_DB: authentik
    env_file:
      - .env
    networks:
      - default
  redis:
    image: docker.io/library/redis:alpine
    command: --save 60 1 --loglevel warning
    restart: always
    healthcheck:
      test:
        - CMD-SHELL
        - redis-cli ping | grep PONG
      start_period: 20s
      interval: 30s
      retries: 5
      timeout: 3s
    volumes:
      - redis:/data
    networks:
      - default
  server:
    image: ghcr.io/goauthentik/server:2024.12.0
    container_name: authentik-server
    restart: always
    command: server
    environment:
      AUTHENTIK_REDIS__HOST: redis
      AUTHENTIK_POSTGRESQL__HOST: postgresql
      AUTHENTIK_POSTGRESQL__USER: authentik
      AUTHENTIK_POSTGRESQL__NAME: authentik
      AUTHENTIK_POSTGRESQL__PASSWORD: ${PG_PASS}
    volumes:
      - ./data/media:/media
      - ./data/custom-templates:/templates
    env_file:
      - .env
    ports:
      - 9000:9000
      - 9443:9443
    depends_on:
      postgresql:
        condition: service_healthy
      redis:
        condition: service_healthy
    networks:
      - proxy
      - default
    labels:
      - traefik.enable=true
      - traefik.http.routers.authentik.rule=Host(`auth.tgmcpa.net`) || Host(`authentik.tgmcpa.net`)
      - traefik.http.routers.authentik.entrypoints=websecure
      - traefik.http.routers.authentik.tls.certresolver=cloudflare
      - traefik.http.services.authentik.loadbalancer.server.port=9000
      - homepage.group=Admin Tools
      - homepage.name=Authentik
      - homepage.icon=authentik.png
      - homepage.href=https://auth.tgmcpa.net
  worker:
    image: ghcr.io/goauthentik/server:2024.12.0
    restart: always
    command: worker
    environment:
      AUTHENTIK_REDIS__HOST: redis
      AUTHENTIK_POSTGRESQL__HOST: postgresql
      AUTHENTIK_POSTGRESQL__USER: authentik
      AUTHENTIK_POSTGRESQL__NAME: authentik
      AUTHENTIK_POSTGRESQL__PASSWORD: ${PG_PASS}
    user: root
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data/media:/media
      - ./data/certs:/certs
      - ./data/custom-templates:/templates
    env_file:
      - .env
    depends_on:
      postgresql:
        condition: service_healthy
      redis:
        condition: service_healthy
    networks:
      - default
volumes:
  database:
    driver: local
  redis:
    driver: local
networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/homepage/compose.yml
```yaml
services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    restart: unless-stopped
    ports:
      - 3000:3000
    volumes:
      - ./config:/app/config
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./images:/app/public/images
    env_file:
      - /opt/stacks/global.env
    environment:
      HOMEPAGE_VAR_ERASE_LOGS: "true"
      HOMEPAGE_SKIP_HOST_VALIDATION: "true"
      HOMEPAGE_ALLOWED_HOSTS: "*"
      NODE_TLS_REJECT_UNAUTHORIZED0: "0"
    networks:
      - proxy
    labels:
      - traefik.enable=true
      - traefik.http.routers.homepage.rule=Host(`home.tgmcpa.net`)
      - traefik.http.routers.homepage.entrypoints=websecure
      - "traefik.http.routers.homepage.middlewares=authentik@file"
      - traefik.http.routers.homepage.tls.certresolver=cloudflare
networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/dockpeek/compose.yml
```yaml
# /opt/stacks/dockpeek/compose.yaml
services:
  dockpeek:
    image: dockpeek/dockpeek:latest
    container_name: dockpeek
    restart: unless-stopped
    environment:
      - DOCKER_HOSTS=local:unix:///var/run/docker.sock,gatekeeper:tcp://10.0.0.10:2375,workhorse:tcp://10.0.0.246:2375,frigate:tcp://10.0.0.110:2375,z240:tcp://10.0.0.20:2375
      - SECRET_KEY=SomethingSecure123! # Required for the session
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      - proxy
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.dockpeek.rule=Host(`dockpeek.tgmcpa.net`)"
      - "traefik.http.routers.dockpeek.entrypoints=websecure"
      - "traefik.http.routers.dockpeek.tls=true"
      - "traefik.http.routers.dockpeek.tls.certresolver=cloudflare"
      - "traefik.http.services.dockpeek.loadbalancer.server.port=8000" # THE FIX
#      - "traefik.http.routers.dockpeek.middlewares=authentik@file" # Matches your Homepage config

networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/dockpeek/compose.yaml
```yaml
services:
  dockpeek:
    image: dockpeek/dockpeek:latest
    container_name: dockpeek
    restart: unless-stopped
    environment:
      - SECRET_KEY=1985ab7d7620a26c9a51349df0237b85
      - USERNAME=admin
      - PASSWORD=admin
      # Returning to "Local" and ensuring the numbered list matches the previous success
      - DOCKER_HOST_1_NAME=Local
      - DOCKER_HOST_1_URL=unix:///var/run/docker.sock
      - DOCKER_HOST_2_NAME=Gatekeeper
      - DOCKER_HOST_2_URL=tcp://10.0.0.10:2375
      - DOCKER_HOST_3_NAME=Workhorse
      - DOCKER_HOST_3_URL=tcp://10.0.0.246:2375
      - DOCKER_HOST_4_NAME=Frigate
      - DOCKER_HOST_4_URL=tcp://10.0.0.110:2375
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      - proxy
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.dockpeek.rule=Host(`dockpeek.tgmcpa.net`)"
      - "traefik.http.routers.dockpeek.entrypoints=websecure"
      - "traefik.http.routers.dockpeek.tls=true"
      - "traefik.http.routers.dockpeek.tls.certresolver=cloudflare"
      - "traefik.http.services.dockpeek.loadbalancer.server.port=8000"
      - "traefik.http.routers.dockpeek.middlewares=authentik@file"
      - "kop.tgmcpa.net/enabled=true"

networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/dockge/compose.yaml
```yaml
services:
  dockge:
    image: louislam/dockge:1
    restart: always
    ports:
      - 5001:5001
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data:/app/data
      - /opt/stacks:/opt/stacks
    environment:
      - DOCKGE_STACKS_DIR=/opt/stacks
    labels:
      - "homepage.enable=true"
      - "homepage.group=Admin Tools"
      - "homepage.name=Dockge (Core)"
      - "homepage.icon=dockge.png"
      - "homepage.href=http://10.0.0.245:5001"
      - "homepage.description=Local Manager"
      - "homepage.weight=0"
```
   FILE: /opt/stacks/uptime-kuma/compose.yaml
```yaml
services:
  uptime-kuma:
    image: louislam/uptime-kuma:latest
    container_name: uptime-kuma
    restart: unless-stopped
    networks:
      - proxy
    volumes:
      - /opt/stacks/uptime-kuma:/app/data
    labels:
      - traefik.enable=true
      - traefik.http.routers.kuma.rule=Host(`uptime.tgmcpa.net`)
      - traefik.http.routers.kuma.entrypoints=websecure
      - traefik.http.routers.kuma.tls.certresolver=cloudflare
      - traefik.http.services.kuma.loadbalancer.server.port=3001
      - homepage.group=Monitoring
      - homepage.name=Uptime Kuma
      - homepage.icon=server-network
      - homepage.href=https://uptime.tgmcpa.net

networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/dozzle/compose.yml
```yaml
services:
  dozzle:
    image: amir20/dozzle:latest
    container_name: dozzle
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro 
    environment:
      # This is what builds your "Global List" across the 4 nodes
      - DOZZLE_REMOTE_HOST=tcp://10.0.0.10:2375,tcp://10.0.0.246:2375,tcp://10.0.0.110:2375,tcp://10.0.0.20:2375
      - DOZZLE_LEVEL=info
    networks:
      - proxy
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.dozzle.rule=Host(`dozzle.tgmcpa.net`)"
      - "traefik.http.routers.dozzle.entrypoints=websecure"
      - "traefik.http.routers.dozzle.tls=true"
      - "traefik.http.routers.dozzle.tls.certresolver=cloudflare"
      - "traefik.http.services.dozzle.loadbalancer.server.port=8080"
      # Authentik for security
      - "traefik.http.routers.dozzle.middlewares=authentik@file"

networks:
  proxy:
    external: true
```
   FILE: /opt/stacks/gotify/compose.yaml
```yaml
services:
  gotify:
    image: gotify/server:latest
    container_name: gotify
    restart: unless-stopped
    networks:
      - proxy
    volumes:
      - /opt/stacks/gotify:/app/data
    labels:
      - traefik.enable=true
      - traefik.http.routers.gotify.rule=Host(`gotify.tgmcpa.net`)
      - traefik.http.routers.gotify.entrypoints=websecure
      - traefik.http.routers.gotify.tls.certresolver=cloudflare
      - traefik.http.services.gotify.loadbalancer.server.port=80
      - homepage.group=Monitoring
      - homepage.name=Gotify
      - homepage.icon=bell-ring
      - homepage.href=https://gotify.tgmcpa.net

networks:
  proxy:
    external: true
```

================================================================================
 NODE: PVE-Z240 (Workhorse) (10.0.0.20)
================================================================================

   >>> [ LXC CONTAINER: 100 ] <<<
   ----------------------------------------
```
```
   FILE: /opt/stacks/socket-proxy/compose.yml
```yaml
services:
  socket-proxy:
    image: tecnativa/docker-socket-proxy
    container_name: socket-proxy
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - CONTAINERS=1
      - IMAGES=1
      - INFO=1
      - NETWORKS=1
      - SERVICES=1
      - STATS=1
    ports:
      - "2375:2375"
```
   FILE: /opt/stacks/dockge/compose.yaml
```yaml
services:
  dockge:
    image: louislam/dockge:1
    restart: always
    ports:
      - 5001:5001
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data:/app/data
      - /opt/stacks:/opt/stacks
    environment:
      - DOCKGE_STACKS_DIR=/opt/stacks
    labels:
      - "homepage.group=Admin Tools"
      - "homepage.name=Dockge (Workhorse)"
      - "homepage.icon=dockge.png"
      - "homepage.href=http://dockge-workhorse.tgmcpa.net"
      - "homepage.description=LXC 100 Manager"
```
   FILE: /opt/stacks/vaultwarden/compose.yml
```yaml
services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: always
    environment:
      - SIGNUPS_ALLOWED=false
    volumes:
      - ./data:/data
    ports:
      - 11001:80
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.vaultwarden.rule=Host(`vaultwarden.tgmcpa.net`)"
      - "traefik.http.routers.vaultwarden.entrypoints=websecure"
      - "traefik.http.routers.vaultwarden.tls=true"
      - "traefik.http.routers.vaultwarden.tls.certresolver=cloudflare"
      - "traefik.http.services.vaultwarden.loadbalancer.server.port=80"
      - "traefik.kop.host=10.0.0.246"
```
   FILE: /opt/stacks/vaultwarden/docker-compose.yml
```yaml
services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: unless-stopped
    privileged: true              # <--- THE MAGIC KEY
    volumes:
      - ./data:/data
    environment:
      - WEBSOCKET_ENABLED=true
    ports:
      - "11001:80"
```
   FILE: /opt/stacks/paperlessngx/compose.yml
```yaml
services:
  db:
    image: postgres:17
    container_name: paperless-db
    restart: unless-stopped
    environment:
      POSTGRES_DB: paperless
      POSTGRES_USER: paperless
      POSTGRES_PASSWORD: paperless
    volumes:
      - /mnt/8tb/paperlessngx/db:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    container_name: paperless-redis
    restart: unless-stopped
    command: ["redis-server", "--requirepass", "redispass"]
    volumes:
      - ./redis:/data

  paperless:
    image: ghcr.io/paperless-ngx/paperless-ngx:latest
    container_name: paperless
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.paperless.rule=Host(`paperless.tgmcpa.net`)"
      - "traefik.http.routers.paperless.entrypoints=websecure"
      - "traefik.http.routers.paperless.tls=true"
      - "traefik.http.routers.paperless.tls.certresolver=cloudflare"
      - "traefik.http.services.paperless.loadbalancer.server.port=8000"
    restart: unless-stopped
    depends_on:
      - db
      - redis
    ports:
      - "8000:8000"
    environment:
      PAPERLESS_SECRET_KEY: change-me-to-something-secure-later-123
      PAPERLESS_REDIS: redis://:redispass@redis:6379
      PAPERLESS_DBENGINE: postgresql
      PAPERLESS_DBHOST: db
      PAPERLESS_DBNAME: paperless
      PAPERLESS_DBUSER: paperless
      PAPERLESS_DBPASS: paperless
      PAPERLESS_TIME_ZONE: America/Detroit
      PAPERLESS_URL: "https://paperless.tgmcpa.net"
      PAPERLESS_USE_X_FORWARD_PORT: "true"
      PAPERLESS_USE_X_FORWARD_HOST: "true"
      PAPERLESS_PROXY_SSL_HEADER: '["X-Forwarded-Proto","https"]'
    volumes:
      - /mnt/8tb/paperlessngx/data:/usr/src/paperless/data
      - /mnt/8tb/paperlessngx/media:/usr/src/paperless/media
      - /mnt/8tb/paperlessngx/export:/usr/src/paperless/export
      - /mnt/8tb/paperlessngx/consume:/usr/src/paperless/consume
      - /mnt/8tb/paperlessngx/trash:/usr/src/paperless/trash
```
   FILE: /opt/stacks/glances/docker-compose.yml
```yaml
services:
  glances:
    image: nicolargo/glances:latest-full
    container_name: glances
    restart: always
    ports:
      - "61208:61208"
    environment:
      - GLANCES_OPT=-w
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
```
   FILE: /opt/stacks/plex/compose.yaml
```yaml
services:
  plex:
    image: lscr.io/linuxserver/plex:latest
    container_name: plex
    restart: unless-stopped
    network_mode: host
    gpus: all
    environment:
      - PLEX_CLAIM=claim-kXZq9sdvx_5LkQXC-Txt
      - PLEX_UID=1000
      - PLEX_GID=1000
      - TZ=America/Detroit
      - CHANGE_CONFIG_DIR_OWNERSHIP=true
      # GPU
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,video,utility
    volumes:
      - ./config:/config
      - /mnt/nas/Movies:/media/Movies
      - /mnt/nas/tv:/media/tv
```
   FILE: /opt/stacks/plex/compose.yml
```yaml
services:
  plex:
    image: lscr.io/linuxserver/plex:latest
    container_name: plex
    restart: unless-stopped
    network_mode: host
    gpus: all
    environment:
      - PLEX_CLAIM=claim-kXZq9sdvx_5LkQXC-Txt
      - PLEX_UID=1000
      - PLEX_GID=1000
      - TZ=America/Detroit
      - CHANGE_CONFIG_DIR_OWNERSHIP=true
      # GPU
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,video,utility
    volumes:
      - ./config:/config
      - /mnt/nas/Movies:/media/Movies
      - /mnt/nas/tv:/media/tv
```
   FILE: /opt/stacks/database-core/docker-compose.yml
```yaml
services:
  postgres:
    image: postgres:16
    container_name: postgres-master
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=global_db_password # Change this!
    volumes:
      - ./postgres_data:/var/lib/postgresql/data
    networks:
      - traefik_network
    restart: unless-stopped

  redis:
    image: redis:7
    container_name: redis-master
    networks:
      - traefik_network
    restart: unless-stopped

networks:
  traefik_network:
    external: true
```
   FILE: /opt/stacks/overseerr/compose.yml
```yaml
services:
  overseerr:
    image: sctx/overseerr:latest
    container_name: overseerr
    environment:
      - LOG_LEVEL=info
      - TZ=America/Detroit
    volumes:
      - /opt/stacks/overseerr/config:/app/config
    ports:
      - 5055:5055
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.overseerr.rule=Host(`overseerr.local`)"
      - "traefik.http.services.overseerr.loadbalancer.server.port=5055"
      - "homepage.group=The Arr Stack"
      - "homepage.name=Overseerr"
      - "homepage.icon=overseerr.png"
      - "homepage.href=http://10.0.0.246:5055"
      - "homepage.description=Request Management"
```

   >>> [ LXC CONTAINER: 200 ] <<<
   ----------------------------------------
```
```
   FILE: /opt/stacks/socket-proxy/compose.yaml
```yaml
services:
  socket-proxy:
    image: tecnativa/docker-socket-proxy
    container_name: socket-proxy
    restart: always
    ports:
      - 2375:2375
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - CONTAINERS=1
      - INFO=1
      - IMAGES=1
      - NETWORKS=1
      - STATS=1
```
   FILE: /opt/stacks/traefik-kop/compose.yml
```yaml
services:
  traefik-kop:
    image: ghcr.io/jittering/traefik-kop:latest
    container_name: traefik-kop
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - REDIS_ADDR=10.0.0.245:6379
      - BIND_IP=10.0.0.110
```
   FILE: /opt/stacks/frigate/compose.yml
```yaml
services:
  mqtt:
    image: eclipse-mosquitto:2
    container_name: mosquitto
    restart: unless-stopped
    ports:
      - "1883:1883"
    volumes:
      - ./mosquitto/config:/mosquitto/config
      - ./mosquitto/data:/mosquitto/data
      - ./mosquitto/log:/mosquitto/log
    # Create a default config so it starts without issues
    entrypoint: ["/bin/sh", "-c", "echo 'listener 1883' > /mosquitto/config/mosquitto.conf && echo 'allow_anonymous true' >> /mosquitto/config/mosquitto.conf && /usr/sbin/mosquitto -c /mosquitto/config/mosquitto.conf"]

  frigate:
    container_name: frigate
    image: ghcr.io/blakeblackshear/frigate:stable
    privileged: true
    restart: unless-stopped
    shm_size: "256mb"
    devices:
      # Dual Coral TPUs
      - /dev/apex_0:/dev/apex_0
      - /dev/apex_1:/dev/apex_1
      # Nvidia T1000
      - /dev/nvidia0:/dev/nvidia0
      - /dev/nvidiactl:/dev/nvidiactl
      - /dev/nvidia-uvm:/dev/nvidia-uvm
      - /dev/nvidia-modeset:/dev/nvidia-modeset
    runtime: nvidia
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ./config:/config
      # MAP THE 8TB TANK HERE
      - /media/frigate_storage:/media/frigate
      - type: tmpfs
        target: /tmp/cache
        tmpfs:
          size: 1000000000
    ports:
      - "5000:5000"
      - "8554:8554"
      - "8555:8555"
    environment:
      - LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu
      - FRIGATE_RTSP_PASSWORD=password
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility,video
    labels:
      # --- Traefik / KOP (External Access) ---
      - "traefik.enable=true"
      - "traefik.http.routers.frigate.rule=Host(`frigate.tgmcpa.net`)"
      - "traefik.http.routers.frigate.entrypoints=websecure"
      - "traefik.http.routers.frigate.tls=true"
      - "traefik.http.routers.frigate.tls.certresolver=cloudflare"
      - "traefik.http.services.frigate.loadbalancer.server.port=5000"
      - "traefik-kop.bind=frigate"

      # --- Homepage Discovery (Automatic Dashboard Entry) ---
      - "homepage.enable=true"
      - "homepage.group=Lab"
      - "homepage.name=Frigate"
      - "homepage.icon=frigate.png"
      - "homepage.href=https://frigate.tgmcpa.net"
#      - "homepage.description=AI NVR & Surveillance"
      
      # --- Homepage Widget (Live Stats) ---
      - "homepage.widget.type=frigate"
      - "homepage.widget.url=http://10.0.0.110:5000" # Internal API path

  socket-proxy:
    image: tecnativa/docker-socket-proxy
    container_name: socket-proxy
    restart: always
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - CONTAINERS=1 # Allows Homepage to see container list/status
    ports:
      - "2375:2375"
```

================================================================================
 NODE: IMAC (Idle) (10.0.0.22)
================================================================================

================================================================================
 NODE: GATEKEEPER (Pi5) (10.0.0.10)
================================================================================
```
NAMES                 IMAGE                                  STATUS                 PORTS
docker-socket-proxy   tecnativa/docker-socket-proxy:latest   Up 43 hours            0.0.0.0:2375->2375/tcp, [::]:2375->2375/tcp
beszel-agent          henrygd/beszel-agent                   Up 43 hours            
glances               nicolargo/glances:latest-full          Up 11 days             
adguardhome           adguard/adguardhome                    Up 31 hours            
beszel                henrygd/beszel:latest                  Up 11 days             0.0.0.0:8090->8090/tcp, [::]:8090->8090/tcp
dockge-dockge-1       louislam/dockge:1                      Up 11 days (healthy)   0.0.0.0:5001->5001/tcp, [::]:5001->5001/tcp
```
   FILE: /opt/stacks/socket-proxy/compose.yaml
```yaml
services:
  docker-socket-proxy:
    image: tecnativa/docker-socket-proxy:latest
    container_name: docker-socket-proxy
    restart: always
    ports:
      - "2375:2375"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      CONTAINERS: 1
      POST: 0
      INFO: 1
      IMAGES: 1
      NETWORKS: 1
      STATS: 1
```
   FILE: /opt/stacks/beszel/compose.yaml
```yaml
services:
  beszel:
    image: henrygd/beszel:latest
    container_name: beszel
    restart: always
    ports:
      - "8090:8090"
    volumes:
      - ./beszel_data:/beszel_data

  beszel-agent:
    image: henrygd/beszel-agent:latest
    container_name: beszel-agent
    restart: always
    network_mode: host
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      PORT: 45876
      KEY: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFH3ZMVMthg5LQFtTL8xQUnhTfCkVphO/dLjvQXxicSj" # You can fill this in via the Dockge GUI later if needed
```
   FILE: /opt/stacks/dockge/compose.yaml
```yaml
services:
  dockge:
    image: louislam/dockge:1
    restart: always
    ports:
      - 5001:5001
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data:/app/data
      - /opt/stacks:/opt/stacks
    environment:
      - DOCKGE_STACKS_DIR=/opt/stacks
    labels:
      - "homepage.group=Admin Tools"
      - "homepage.name=Dockge (Pi5)"
      - "homepage.icon=dockge.png"
      - "homepage.href=http://10.0.0.10:5001"
      - "homepage.description=Gatekeeper Manager"
      - "homepage.weight=2"
```
   FILE: /opt/stacks/glances/compose.yaml
```yaml
services:
  glances:
    image: nicolargo/glances:latest-full
    container_name: glances
    restart: always
    pid: host
    network_mode: host
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - GLANCES_OPT=-w
networks: {}
```
   FILE: /opt/stacks/adguard/compose.yaml
```yaml
services:
  adguardhome:
    image: adguard/adguardhome
    container_name: adguardhome
    restart: unless-stopped
    network_mode: host
    volumes:
      - ./work:/opt/adguardhome/work
      - ./conf:/opt/adguardhome/conf
    labels:
      - "homepage.group=Infrastructure & Security"
      - "homepage.name=AdGuard Home"
      - "homepage.icon=adguard-home.png"
      - "homepage.href=http://10.0.0.10:3000"
      - "homepage.description=DNS Sinkhole"
```

================================================================================
 NODE: NAS (Synology) (10.0.0.30)
================================================================================
```
```
   FILE: /volume1/docker/huntarr/docker-compose.yml
```yaml
services:
  huntarr:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: huntarr
    ports:
      - "9705:9705"
    volumes: 
      - huntarr-config:/config
    environment:
      - TZ=America/Detroit
      - BASE_URL=${BASE_URL:-}
    restart: unless-stopped
    # Graceful shutdown configuration
    stop_signal: SIGTERM
    stop_grace_period: 30s
    # Health check configuration
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9705/health"]
      interval: 30s
      timeout: 10s
      start_period: 40s
      retries: 3

volumes:
  huntarr-config:
    name: huntarr-config```
   FILE: /volume1/docker/portainer/compose/1/docker-compose.yml
```yaml
services:
  tdarr:
    container_name: tdarr
    image: ghcr.io/haveagitgat/tdarr:latest
    restart: unless-stopped
    network_mode: bridge
    ports:
      - 8265:8265 # webUI port
      - 8266:8266 # server port
      - 8267:8267 # Internal node port
      - 8268:8268 # Example extra node port
    environment:
      - TZ=America/Detroit
      - PUID=${PUID}
      - PGID=${PGID}
      - UMASK_SET=002
      - serverIP=10.0.0.95
      - serverPort=8266
      - webUIPort=8265
      - internalNode=true
      - nodeID=UbuntuServer
    volumes:
      - /portainer/Files/AppData/Config/tdarr/server:/app/server
      - /portainer/Files/AppData/Config/tdarr/configs:/app/configs
      - /portainer/Files/AppData/Config/logs:/app/logs
      - /portainer/media:/media
      - /portainer/transcode_cache:/temp
      - /mnt/Movies:/Movies:rw
      - /mnt/TV\040Shows:/TV\040Shows:rw
      - /mnt/NAS-Downloads:/NAS-Downloads:rw
```
   FILE: /volume1/docker/portainer/compose/2/docker-compose.yml
```yaml
services:
  watchtower:
    image: containrrr/watchtower:latest
    container_name: WATCHTOWER
    hostname: watchtower
    mem_limit: 512m
    mem_reservation: 128m
    cpu_shares: 512
    security_opt:
      - no-new-privileges=true
    read_only: true
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      TZ: America/Detroit
      WATCHTOWER_CLEANUP: true # Remove old images after updating
      WATCHTOWER_REMOVE_VOLUMES: false # Remove attached volumes after updating
      DOCKER_API_VERSION: 1.43 # SSH docker version 1.41 for Docker engine version 20.10 - 1.43 for Docker engine version 24 - 1.45 for Docker engine version 26.1
      WATCHTOWER_INCLUDE_RESTARTING: true # Restart containers after update
      WATCHTOWER_INCLUDE_STOPPED: false # Update stopped containers
      WATCHTOWER_SCHEDULE: "0 0 */2 * * *" # Update & Scan containers every 2 hours
      WATCHTOWER_LABEL_ENABLE: false
      WATCHTOWER_ROLLING_RESTART: true
      WATCHTOWER_TIMEOUT: 30s
      WATCHTOWER_LOG_FORMAT: pretty
    restart: unless-stopped```
   FILE: /volume1/docker/portainer/compose/3/docker-compose.yml
```yaml
services:
  db:
    image: postgres:17
    container_name: Vaultwarden-DB
    hostname: vaultwarden-db
    security_opt:
      - no-new-privileges:true
    healthcheck:
      test: ["CMD", "pg_isready", "-q", "-d", "vaultwarden", "-U", "vaultwardenuser"]
      timeout: 45s
      interval: 10s
      retries: 10
    volumes:
      - /volume1/docker/vaultwarden/db:/var/lib/postgresql/data:rw
    environment:
      POSTGRES_DB: vaultwarden
      POSTGRES_USER: vaultwardenuser
      POSTGRES_PASSWORD: vaultwardenpass
    restart: on-failure:5

  vaultwarden:
    image: vaultwarden/server:latest
    container_name: Vaultwarden
    hostname: vaultwarden
    security_opt:
      - no-new-privileges:true
    user: 1026:101
    ports:
      - 4080:4020
    volumes:
      - /volume1/docker/vaultwarden/data:/data:rw
    environment:
      ROCKET_PORT: 4020
      DATABASE_URL: postgresql://vaultwardenuser:vaultwardenpass@vaultwarden-db:5432/vaultwarden
      ADMIN_TOKEN: Mariaoie9vJLE9ariushostingMari13
      DISABLE_ADMIN_TOKEN: false
      DOMAIN: https://vaultwarden.blastedleftynas.synology.me
      SMTP_HOST: smtp.gmail.com
      SMTP_FROM: t.g.mcclellan@gmail.com
      SMTP_PORT: 587
      SMTP_SECURITY: starttls
      SMTP_USERNAME: t.g.mcclellan@gmail.com
      SMTP_PASSWORD: rczrhpwdhC0agCYzUaUbbGmOLZVgcWd1ZparmbgvQb3XjjMODcBPA1LYaapBY7YheEw1Bq35SpJjz
    restart: unless-stopped
    depends_on:
      db:
        condition: service_started```
   FILE: /volume1/docker/portainer/compose/4/docker-compose.yml
```yaml
services:
  uptimekuma:
    image: louislam/uptime-kuma
    container_name: Uptime-Kuma
    hostname: uptimekuma
    mem_limit: 4g
    cpu_shares: 1024
    ports:
      - 3444:3001
    volumes:
      - /volume1/docker/uptimekuma:/app/data:rw
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      TZ: America/Detroit
    restart: unless-stopped```
   FILE: /volume1/docker/portainer/compose/5/docker-compose.yml
```yaml
services:
  upsnap:
    image: ghcr.io/seriousm4x/upsnap:5
    container_name: UpSnap
    mem_limit: 512m 
    cpu_shares: 768
    healthcheck:
     test: curl -f http://localhost:80/ || exit 1
    network_mode: host
    restart: unless-stopped
    environment:
      - TZ=America/Detroit
    volumes:
      - /volume1/docker/upsnap:/app/pb_data:rw```
   FILE: /volume1/docker/portainer/compose/11/docker-compose.yml
```yaml
version: "3.8"

networks:
  macvlan_net:
    driver: macvlan
    driver_opts:
      parent: ovs_bond0   # Synologyâ€™s bonded LAN interface
    ipam:
      config:
        - subnet: 10.0.0.0/24
          gateway: 10.0.0.1

services:
  pihole:
    container_name: Pi-Hole
    image: pihole/pihole:latest
    restart: unless-stopped
    hostname: pihole
    networks:
      macvlan_net:
        ipv4_address: 10.0.0.30
    environment:
      TZ: America/Detroit
      WEBPASSWORD: "Freedom816pihole"
      PIHOLE_DNS_: "1.1.1.1;1.0.0.1"
      DNSMASQ_USER: "root"
    volumes:
      - /volume1/docker/pihole/etc-pihole:/etc/pihole
      - /volume1/docker/pihole/etc-dnsmasq.d:/etc/dnsmasq.d
    cap_add:
      - NET_ADMIN


```
   FILE: /volume1/docker/portainer/compose/12/docker-compose.yml
```yaml
services:
  homepage:
    container_name: Homepage
    image: gethomepage/homepage:latest
    mem_limit: 4g
    cpu_shares: 768
    security_opt:
      - no-new-privileges:true
    environment:
      HOMEPAGE_ALLOWED_HOSTS: 10.0.0.30:3550, homepage.blastedleftynas.synology.me #You can also add your synology.me DDNS separated by comma like 192.168.1.18:3550, homepage.yourname.synology.me
      PUID: 1026
      PGID: 101
    ports:
      - 3550:3000
    volumes:
      - /volume1/docker/homepage:/app/config:rw
      - /volume1/docker/homepage/public:/app/public/images:rw
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped```
   FILE: /volume1/docker/portainer/compose/15/docker-compose.yml
```yaml
services:
  dozzle-agent:
    image: amir20/dozzle:latest
    command: agent
    healthcheck:
      test: ["CMD", "/dozzle", "healthcheck"]
      interval: 15s
      retries: 5
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - 7007:7007```
   FILE: /volume1/docker/portainer/compose/16/docker-compose.yml
```yaml
services:
  dozzle-agent:
    image: amir20/dozzle:latest
    command: agent
    healthcheck:
      test: ["CMD", "/dozzle", "healthcheck"]
      interval: 5s
      retries: 5
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - 7007:7007```
   FILE: /volume1/docker/portainer/compose/17/docker-compose.yml
```yaml
services:
  dozzle-agent:
    image: amir20/dozzle:latest
    command: agent
    healthcheck:
      test: ["CMD", "/dozzle", "healthcheck"]
      interval: 5s
      retries: 5
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - 7007:7007```
   FILE: /volume1/docker/portainer/compose/21/docker-compose.yml
```yaml
services:
  tinymediamanager:
    image: tinymediamanager/tinymediamanager:latest
    container_name: tinymediamanager
    environment:
      - USER_ID=1026
      - GROUP_ID=101
      - ALLOW_DIRECT_VNC=true
      - LC_ALL=en_US.UTF-8 # force UTF8
      - LANG=en_US.UTF-8   # force UTF8
      - PASSWORD=Freedom816tiny
    volumes:
      - /volume1/docker/tinymediamanager/data:/data
      - /volume1/Movies:/media/movies
      - /volume1/TV Shows:/media/tv_shows
    ports:
      - 5900:5900 # VNC port
      - 4000:4000 # Webinterface
    restart: unless-stopped
```
   FILE: /volume1/docker/portainer/compose/22/docker-compose.yml
```yaml
services:
  tdarr:
    container_name: tdarr
    image: ghcr.io/haveagitgat/tdarr:latest
    restart: unless-stopped
    network_mode: bridge
    ports:
      - 8265:8265 # webUI port
      - 8266:8266 # server port
      - 8267:8267 # Internal node port
      - 8268:8268 # Example extra node port
    environment:
      - TZ=America/Detroit
      - PUID=${PUID}
      - PGID=${PGID}
      - UMASK_SET=002
      - serverIP=10.0.0.95
      - serverPort=8266
      - webUIPort=8265
      - internalNode=true
      - nodeID=UbuntuServer
    volumes:
      - /portainer/Files/AppData/Config/tdarr/server:/app/server
      - /portainer/Files/AppData/Config/tdarr/configs:/app/configs
      - /portainer/Files/AppData/Config/logs:/app/logs
      - /portainer/media:/media
      - /portainer/transcode_cache:/temp
```
   FILE: /volume1/docker/portainer/compose/43/docker-compose.yml
```yaml
services:
  glances-monitoring:
    image: nicolargo/glances
    restart: unless-stopped
#    pid: Z240
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - "GLANCES_OPT=-w"
```
   FILE: /volume1/docker/portainer/custom_templates/1/docker-compose.yml
```yaml
services:
  tdarr:
    container_name: tdarr
    image: ghcr.io/haveagitgat/tdarr:latest
    restart: unless-stopped
    network_mode: bridge
    ports:
      - 8265:8265 # webUI port
      - 8266:8266 # server port
      - 8267:8267 # Internal node port
      - 8268:8268 # Example extra node port
    environment:
      - TZ=America/Detroit
      - PUID=${PUID}
      - PGID=${PGID}
      - UMASK_SET=002
      - serverIP=10.0.0.95
      - serverPort=8266
      - webUIPort=8265
      - internalNode=true
      - nodeID=UbuntuServer
    volumes:
      - /portainer/Files/AppData/Config/tdarr/server:/app/server
      - /portainer/Files/AppData/Config/tdarr/configs:/app/configs
      - /portainer/Files/AppData/Config/logs:/app/logs
      - /portainer/media:/media
      - /portainer/transcode_cache:/temp
```
   FILE: /volume1/docker/portainer/custom_templates/2/docker-compose.yml
```yaml
services:
  tinymediamanager:
    image: tinymediamanager/tinymediamanager:latest
    container_name: tinymediamanager
    environment:
      - USER_ID=1026
      - GROUP_ID=101
      - ALLOW_DIRECT_VNC=true
      - LC_ALL=en_US.UTF-8 # force UTF8
      - LANG=en_US.UTF-8   # force UTF8
      - PASSWORD=Freedom816tiny
    volumes:
      - /volume1/docker/tinymediamanager/data:/data
      - /volume1/Movies:/media/movies
      - /volume1/TV Shows:/media/tv_shows
    ports:
      - 5900:5900 # VNC port
      - 4000:4000 # Webinterface
    restart: unless-stopped
```
   FILE: /volume1/docker/portainer/custom_templates/3/docker-compose.yml
```yaml
services:
  dev:
    container_name: frigate
    user: vscode
    privileged: true
    shm_size: "256mb"
    build:
      context: .
      dockerfile: docker/Dockerfile.dev
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - .:/lab/frigate:cached
      - /portainer/Files/AppData/Config/frigatenvr/config.yml:/config/config.yml:ro
      - ./debug:/media/frigate
      - /dev/bus/usb:/dev/bus/usb
      - /dev/dri:/dev/dri # for intel hwaccel, needs to be updated for your hardware
    ports:
      - "1935:1935"
      - "5000:5000"
      - "5001:5001"
      - "8080:8080"
    entrypoint: ["sudo", "/init"]
    command: /bin/sh -c "while sleep 1000; do :; done"
  mqtt:
    container_name: mqtt
    image: eclipse-mosquitto:1.6
    ports:
      - "1883:1883"
```
   FILE: /volume1/docker/portainer/custom_templates/4/docker-compose.yml
```yaml
version: '3.8'
services:
 immich:
   image: ghcr.io/imagegenius/immich:latest
   container_name: immich
   environment:
     - PUID=1000
     - PGID=1000
     - TZ=America/Detroit
     - DB_HOSTNAME=10.0.0.95
     - DB_USERNAME=postgres
     - DB_PASSWORD=postgres
     - DB_DATABASE_NAME=immich
     - REDIS_HOSTNAME=10.0.0.95
     - DB_PORT=5432 # optional
     - REDIS_PORT=6379 # optional
     - REDIS_PASSWORD= # optional
     - SERVER_HOST=10.0.0.95 # optional
     - SERVER_PORT=8080 # optional
     - MACHINE_LEARNING_HOST=10.0.0.95 # optional
     - MACHINE_LEARNING_PORT=3003 # optional
     - MACHINE_LEARNING_WORKERS=1 # optional
     - MACHINE_LEARNING_WORKER_TIMEOUT=120 # optional
   volumes:
     - path_to_appdata:/config
     - path_to_photos:/photos
     - path_to_libraries:/libraries # optional
   ports:
     - 8080:8080
   restart: unless-stopped
 redis:
   image: redis
   ports:
     - 6379:6379
   container_name: redis
 postgres14:
   image: tensorchord/pgvecto-rs:pg14-v0.2.0
   ports:
     - 5432:5432
   container_name: postgres14
   environment:
     POSTGRES_USER: postgres
     POSTGRES_PASSWORD: postgres
     POSTGRES_DB: immich
   volumes:
     - path_to_postgres:/var/lib/postgresql/data```
   FILE: /volume1/docker/portainer/custom_templates/5/docker-compose.yml
```yaml
services:
  glances-monitoring:
    image: nicolargo/glances
    restart: unless-stopped
#    pid: Z240
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - "GLANCES_OPT=-w"
```
   FILE: /volume1/docker/sabnzbd/docker-compose.yml
```yaml
version: "3"
services:
  sabnzbd:
    image: lscr.io/linuxserver/sabnzbd:latest
    container_name: sabnzbd
#    env_file: /volume1/docker/.env
    environment:
      - PUID=1026
      - PGID=100
      - TZ=America/Detroit
    volumes:
      - .:/config
      - /volume1/NAS-Downloads/Complete:/downloads
      - /volume1/NAS-Downloads/Incomplete:/incomplete-downloads
    ports:
      - 8080:8080
    restart: unless-stopped

```
